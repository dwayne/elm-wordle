<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1" />

    <title>Guess</title>

    <link rel="stylesheet" href="/index.css">
  </head>
  <body class="prototype">
    <h1>Guess</h1>

    <h2>Empty</h2>

    <div class="guess">
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
    </div>

    <h2>Make a guess</h2>

    <p>Use the buttons below to add/remove letters to make a guess.</p>

    <div id="a-guess" class="guess">
      <div class="tile">
        <div class="tile__front">
          <div class="letter">p</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">a</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
    </div>
    <p><button id="add">Add</button> <button id="remove">Remove</button></p>
    <script>
      window.addEventListener('load', () => {
        const addButton = document.getElementById('add')
        const removeButton = document.getElementById('remove')
        const letters = ['p', 'a', 'g', 'e', 'r']
        let lettersIndex = 2

        addButton.addEventListener('click', () => {
          const letter = document.querySelector('#a-guess .letter:empty')

          if (letter && lettersIndex < 5) {
            const tile = letter.closest('.tile')

            letter.textContent = letters[lettersIndex++]
            tile.classList.add('tile--animation--appear')
          }
        })

        removeButton.addEventListener('click', (e) => {
          const letter = Array.from(document.querySelectorAll('#a-guess .letter:not(:empty)')).slice(-1)[0]

          if (letter) {
            const tile = letter.closest('.tile')

            letter.textContent = null
            lettersIndex--
            tile.classList.remove('tile--animation--appear')
          }
        })
      })
    </script>

    <h2>Not enough letters</h2>

    <div id="not-enough-letters-guess" class="guess">
      <div class="tile">
        <div class="tile__front">
          <div class="letter">p</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">a</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">s</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter"></div>
        </div>
        <div class="tile__back"></div>
      </div>
    </div>
    <p><button id="not-enough-letters-button">Not enough letters</button></p>
    <script>
      window.addEventListener('load', () => {
        const guess = document.getElementById('not-enough-letters-guess')
        const button = document.getElementById('not-enough-letters-button')

        guess.addEventListener('animationend', () => {
          guess.classList.remove('guess--animation--shake')
          button.removeAttribute('disabled')
        })

        button.addEventListener('click', () => {
          guess.classList.add('guess--animation--shake')
          button.setAttribute('disabled', '')
        })
      })
    </script>

    <h2>Not in word list</h2>

    <div id="not-in-word-list-guess" class="guess">
      <div class="tile">
        <div class="tile__front">
          <div class="letter">p</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">a</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">s</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">d</div>
        </div>
        <div class="tile__back"></div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">f</div>
        </div>
        <div class="tile__back"></div>
      </div>
    </div>
    <p><button id="not-in-word-list-button">Not in word list</button></p>
    <script>
      window.addEventListener('load', () => {
        const guess = document.getElementById('not-in-word-list-guess')
        const button = document.getElementById('not-in-word-list-button')

        guess.addEventListener('animationend', () => {
          guess.classList.remove('guess--animation--shake')
          button.removeAttribute('disabled')
        })

        button.addEventListener('click', () => {
          guess.classList.add('guess--animation--shake')
          button.setAttribute('disabled', '')
        })
      })
    </script>

    <h2>Reveal</h2>

    <p><em>Reveal</em> the outcome of a valid guess.</p>

    <div id="a-reveal" class="guess">
      <div class="tile">
        <div class="tile__front">
          <div class="letter">p</div>
        </div>
        <div class="tile__back">
          <div class="letter letter--result--possible">p</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">a</div>
        </div>
        <div class="tile__back">
          <div class="letter letter--result--possible">a</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">g</div>
        </div>
        <div class="tile__back">
          <div class="letter letter--result--impossible">g</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">e</div>
        </div>
        <div class="tile__back">
          <div class="letter letter--result--correct">e</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile__front">
          <div class="letter">r</div>
        </div>
        <div class="tile__back">
          <div class="letter letter--result--impossible">r</div>
        </div>
      </div>
    </div>
    <p><button id="reveal">Reveal</button> <button id="reset">Reset</button></p>
    <script>
      window.addEventListener('load', () => {
        const revealButton = document.getElementById('reveal')
        const resetButton = document.getElementById('reset')
        const tiles = document.querySelectorAll('#a-reveal .tile')

        resetButton.setAttribute('disabled', '')

        const lastTile = Array.from(tiles).slice(-1)[0]
        if (lastTile) {
          lastTile.addEventListener('animationend', () => {
            resetButton.removeAttribute('disabled')
          })
        }

        revealButton.addEventListener('click', () => {
          tiles.forEach(tile => {
            tile.classList.add('tile--animation--flip')
          })
          revealButton.setAttribute('disabled', '')
        })

        resetButton.addEventListener('click', () => {
          tiles.forEach(tile => {
            tile.classList.remove('tile--animation--flip')
          })
          revealButton.removeAttribute('disabled')
          resetButton.setAttribute('disabled', '')
        })
      })
    </script>
  </body>
</html>
